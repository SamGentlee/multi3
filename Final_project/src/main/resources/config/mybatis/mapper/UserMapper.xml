<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="three.user.mapper.UserMapper">

	<!-- 회원가입 -->
	<insert id="joinUser" parameterType="User">
		<selectKey keyProperty="userNum" resultType="int"
			order="BEFORE">
			select user_seq.nextval from dual
		</selectKey>
		insert into project_user values(#{userNum},#{userId}, #{userPassword},
		#{userName}, #{userTel}, #{userEmail}, #{userAddr1}, #{userAddr2},
		#{userAddr3},
		#{userNick:VARCHAR}, 100000, #{userImage:VARCHAR}, #{userInfo:VARCHAR},
		#{userBronzeBadge:NUMERIC}, #{userSilverBadge:NUMERIC},
		#{userGoldBadge:NUMERIC},
		#{userTwitter:VARCHAR},
		#{userFacebook:VARCHAR}, #{userInstagram:VARCHAR},
		#{userLinkedin:VARCHAR},
		#{userStatus}
		)
	</insert>
	
	<!-- 아이디 중복검사 -->
  	<select id="idCheck" resultType="int">
  	
  		select count(*) from project_user where userId = #{userId}
  	
  	</select>

	<!-- 로그인 -->
	<select id="loginUser" resultType="three.user.model.UserVO">

		select userNum, userId,
		userPassword, userName, userTel, userEmail,
		userAddr1, userAddr2,
		userAddr3, userNick, userPoint, userImage, userInfo,
		userBronzeBadge, userSilverBadge, userGoldBadge, userTwitter,
		userFacebook, userInstagram, userLinkedin, userStatus
		from project_user where
		userId
		= #{userId} and userPassword = #{userPassword}

	</select>

</mapper>